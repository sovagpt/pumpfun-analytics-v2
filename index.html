<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pump.fun Volume Analytics</title>
    <link rel="icon" type="image/png" href="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a85527c38ba1f26c5446_ChatGPT%20Image%20May%2029%2C%202025%2C%2001_14_33%20AM.png">
    <link rel="shortcut icon" type="image/png" href="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a85527c38ba1f26c5446_ChatGPT%20Image%20May%2029%2C%202025%2C%2001_14_33%20AM.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #0f0f23;
            color: #ffffff;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background-color: #1a1a2e;
            border-radius: 12px;
            border: 1px solid #2d2d3a;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #00ff88;
        }

        .header p {
            font-size: 1.1rem;
            color: #a0a0a0;
            margin-bottom: 15px;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: #2d2d3a;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #00ff88;
        }

        .social-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        .social-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background-color: #2d2d3a;
            border: 1px solid #404040;
            border-radius: 8px;
            text-decoration: none;
            color: #ffffff;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .social-btn:hover {
            background-color: #404040;
            border-color: #00ff88;
            transform: translateY(-2px);
        }

        .social-btn img {
            width: 20px;
            height: 20px;
            object-fit: contain;
        }

        .contract-address {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            padding: 12px 20px;
            background-color: #2d2d3a;
            border: 1px solid #404040;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }

        .ca-label {
            color: #00ff88;
            font-weight: 600;
        }

        .ca-address {
            color: #ffffff;
            flex: 1;
            text-align: center;
            word-break: break-all;
            user-select: all;
        }

        .copy-btn {
            background-color: #00ff88;
            border: none;
            color: #000000;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            background-color: #00cc6a;
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .last-update {
            text-align: center;
            margin-bottom: 30px;
            color: #a0a0a0;
            font-size: 0.9rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background-color: #1a1a2e;
            border: 1px solid #2d2d3a;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            border-color: #00ff88;
            transform: translateY(-2px);
        }

        .stat-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .stat-icon {
            width: 32px;
            height: 32px;
            background-color: #2d2d3a;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #00ff88;
        }

        .stat-icon img {
            width: 20px;
            height: 20px;
            object-fit: contain;
        }

        .stat-title {
            font-size: 0.9rem;
            color: #a0a0a0;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .positive { 
            color: #00ff88; 
        }
        .negative { 
            color: #ff6b6b; 
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .chart-container {
            background-color: #1a1a2e;
            border: 1px solid #2d2d3a;
            border-radius: 12px;
            padding: 25px;
        }

        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #ffffff;
        }

        /* Pump.fun style terminal */
        .ai-terminal {
            background-color: #1a1a2e;
            border: 1px solid #2d2d3a;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 20px;
        }

        .terminal-header {
            background-color: #2d2d3a;
            padding: 12px 20px;
            border-bottom: 1px solid #404040;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .terminal-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #ffffff;
        }

        .terminal-body {
            height: 400px;
            overflow-y: auto;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
            line-height: 1.5;
        }

        .message {
            padding: 15px 20px;
            border-bottom: 1px solid #2d2d3a;
        }

        .message:last-child {
            border-bottom: none;
        }

        .message.user {
            background-color: rgba(0, 255, 136, 0.1);
        }

        .message.assistant {
            background-color: #0f0f23;
        }

        .message.system {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 11px;
            color: #a0a0a0;
        }

        .message-avatar {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: bold;
        }

        .user-avatar {
            background-color: #00ff88;
            color: #000000;
        }

        .assistant-avatar {
            background-color: #ffffff;
            color: #000000;
        }

        .system-avatar {
            background-color: #2d2d3a;
            color: #ffffff;
        }

        .message-content {
            color: #ffffff;
            white-space: pre-wrap;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            line-height: 1.4;
        }

        .terminal-input-container {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background-color: #2d2d3a;
            border-top: 1px solid #404040;
        }

        .input-prompt {
            color: #00ff88;
            margin-right: 8px;
            font-family: 'SF Mono', Monaco, monospace;
            font-weight: 600;
        }

        .terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            outline: none;
            padding: 8px 0;
        }

        .terminal-input::placeholder {
            color: #666666;
        }

        .send-button {
            background-color: #00ff88;
            border: none;
            color: #000000;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
            margin-left: 12px;
        }

        .send-button:hover:not(:disabled) {
            background-color: #00cc6a;
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .social-buttons {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .social-btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .social-btn img {
                width: 18px;
                height: 18px;
            }
            
            .contract-address {
                flex-direction: column;
                gap: 8px;
                padding: 10px 15px;
                font-size: 0.8rem;
            }
            
            .ca-address {
                text-align: center;
                font-size: 0.75rem;
            }
        }

        /* Features Section */
        .features-section {
            margin: 80px 0;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 50px;
            color: #ffffff;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .feature-card {
            background-color: #1a1a2e;
            border: 1px solid #2d2d3a;
            border-radius: 12px;
            padding: 30px;
            transition: all 0.3s ease;
            position: relative;
        }

        .feature-card:hover {
            border-color: #00ff88;
            transform: translateY(-5px);
        }

        .feature-number {
            color: #00ff88;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
        }

        .feature-description {
            color: #a0a0a0;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Security Section */
        .security-section {
            margin: 80px 0;
        }

        .security-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
        }

        .security-card {
            background-color: #1a1a2e;
            border: 1px solid #2d2d3a;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .security-card:hover {
            border-color: #00ff88;
            transform: translateY(-5px);
        }

        .security-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .security-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
        }

        .security-description {
            color: #a0a0a0;
            line-height: 1.6;
            font-size: 0.9rem;
        }

        /* Ecosystem Section */
        .ecosystem-section {
            margin: 80px 0;
        }

        .ecosystem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .ecosystem-card {
            background-color: #1a1a2e;
            border: 1px solid #2d2d3a;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
        }

        .ecosystem-card:hover {
            border-color: #00ff88;
            transform: translateY(-5px);
        }

        .ecosystem-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .ecosystem-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 12px;
        }

        .ecosystem-description {
            color: #a0a0a0;
            line-height: 1.5;
            font-size: 0.85rem;
            margin-bottom: 15px;
        }

        .ecosystem-badge {
            display: inline-block;
            background-color: #00ff88;
            color: #000000;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* Footer */
        .footer {
            margin-top: 80px;
            padding: 25px 0;
            border-top: 1px solid #2d2d3a;
            background-color: #1a1a2e;
        }

        .footer-content {
            text-align: center;
        }

        .footer-content p {
            color: #a0a0a0;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>pump.fun analytics</h1>
            <p>real-time volume tracking and analysis</p>
            <div class="status-indicator">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">checking data feed</span>
            </div>
            
            <div class="social-buttons">
                <a href="https://pump.fun/coin/6f73AApsxQ6HeCqoAbYUkmytDSCMNemfYLj6k9hKpump" target="_blank" class="social-btn">
                    <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/67e09302ce2c79cb6daaebcc_Pump_fun_logo%20(2).png" alt="pump.fun" />
                    <span>pump.fun</span>
                </a>
                <a href="https://twitter.com/volumepumpfun" target="_blank" class="social-btn">
                    <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6830acbd03f5e3b5fc93764a_new-2023-twitter-logo-x-icon-design_1017-45418.avif" alt="twitter" />
                    <span>twitter</span>
                </a>
                <a href="https://t.me/pumpfunvolumereports" target="_blank" class="social-btn">
                    <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837aa04832438a378c1619d_telegram-logo-telegram-logo-transparent-telegram-icon-transparent-free-free-png.webp" alt="telegram" />
                    <span>telegram</span>
                </a>
            </div>
            
            <div class="contract-address">
                <span class="ca-label">ca:6f73AApsxQ6HeCqoAbYUkmytDSCMNemfYLj6k9hKpump</span>
                <span class="ca-address" id="contractAddress">LAUNCHINGSOON</span>
                <button class="copy-btn" onclick="copyContractAddress()">copy</button>
            </div>
        </div>

        <div class="last-update" id="lastUpdate">
            last update: loading...
        </div>

        <div class="stats-grid" id="statsGrid">
            <!-- Stats will be populated here -->
        </div>

        <div class="charts-section">
            <div class="chart-container">
                <h3 class="chart-title">volume trend (24h)</h3>
                <canvas id="volumeChart"></canvas>
            </div>
            <div class="chart-container">
                <h3 class="chart-title">trading activity</h3>
                <canvas id="tradingChart"></canvas>
            </div>
        </div>

        <div class="ai-terminal">
            <div class="terminal-header">
                <div class="terminal-title">ai analytics terminal</div>
            </div>
            <div class="terminal-body" id="terminalOutput">
                <div class="message system">
                    <div class="message-header">
                        <div class="message-avatar system-avatar">SYS</div>
                        <span>system</span>
                        <span id="initTime"></span>
                    </div>
                    <div class="message-content">welcome to pump.fun analytics terminal
connected to live data feed. ask me about volume trends, market analysis, or predictions.</div>
                </div>
            </div>
            <div class="terminal-input-container">
                <span class="input-prompt">></span>
                <input type="text" id="terminalInput" class="terminal-input" placeholder="ask about trends, analysis, predictions...">
                <button class="send-button" onclick="sendCommand()" id="sendButton">send</button>
            </div>
        </div>

        <!-- Features Section -->
        <div class="features-section">
            <h2 class="section-title">features</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-number">01</div>
                    <h3 class="feature-title">real-time volume tracking</h3>
                    <p class="feature-description">volumepump analytics delivers instant volume tracking with 99.99% uptime. our advanced monitoring system captures every transaction, providing traders with accurate, live data to make informed decisions in the fast-moving pump.fun ecosystem.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-number">02</div>
                    <h3 class="feature-title">accurate data logging</h3>
                    <p class="feature-description">precision-engineered data collection ensures every trade, volume spike, and market movement is recorded with mathematical accuracy. our redundant systems guarantee data integrity, giving you the reliable analytics foundation needed for successful trading.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-number">03</div>
                    <h3 class="feature-title">ai-powered insights</h3>
                    <p class="feature-description">leverage advanced artificial intelligence to analyze market patterns, predict volume trends, and identify profitable opportunities. our ai terminal provides instant market analysis, trend predictions, and strategic recommendations based on live data.</p>
                </div>
            </div>
        </div>

        <!-- Security Methods Section -->
        <div class="security-section">
            <h2 class="section-title">security methods</h2>
            
            <div class="security-grid">
                <div class="security-card">
                    <div class="security-icon">
                        <span>🔐</span>
                    </div>
                    <h3 class="security-title">secure data encryption</h3>
                    <p class="security-description">volumepump employs military-grade encryption protocols to protect all user data and trading information. your analytics data, api keys, and trading preferences are secured using industry-standard encryption methods, ensuring complete privacy and data integrity.</p>
                </div>
                
                <div class="security-card">
                    <div class="security-icon">
                        <span>🛡️</span>
                    </div>
                    <h3 class="security-title">multi-layer authentication</h3>
                    <p class="security-description">enhanced security through multi-factor authentication systems. our platform implements advanced verification protocols to protect against unauthorized access, ensuring only verified users can access premium analytics and trading features.</p>
                </div>
                
                <div class="security-card">
                    <div class="security-icon">
                        <span>🔍</span>
                    </div>
                    <h3 class="security-title">continuous monitoring</h3>
                    <p class="security-description">24/7 security monitoring and regular vulnerability assessments ensure platform integrity. we maintain constant vigilance against threats, implementing real-time security updates and patches to protect user assets and data.</p>
                </div>
            </div>
        </div>

        <!-- Ecosystem Section -->
        <div class="ecosystem-section">
            <h2 class="section-title">ecosystem</h2>
            
            <div class="ecosystem-grid">
                <div class="ecosystem-card">
                    <div class="ecosystem-icon">
                        <span>🤖</span>
                    </div>
                    <h3 class="ecosystem-title">volumepump.fun trading bot</h3>
                    <p class="ecosystem-description">advanced ai-powered trading bot with sophisticated algorithms designed to give traders the upper hand in pump.fun markets. features include automated sniping, volume analysis, and intelligent trade execution.</p>
                    <div class="ecosystem-badge">token gated at 100,000 $VOLUME</div>
                </div>
                
                <div class="ecosystem-card">
                    <div class="ecosystem-icon">
                        <span>⚡</span>
                    </div>
                    <h3 class="ecosystem-title">lightning-fast sniping</h3>
                    <p class="ecosystem-description">execute trades with millisecond precision using our high-speed sniping technology. our bot monitors new token launches and volume spikes, automatically executing optimal entry and exit strategies.</p>
                    <div class="ecosystem-badge">premium feature</div>
                </div>
                
                <div class="ecosystem-card">
                    <div class="ecosystem-icon">
                        <span>🧠</span>
                    </div>
                    <h3 class="ecosystem-title">advanced ai systems</h3>
                    <p class="ecosystem-description">proprietary machine learning algorithms analyze market patterns, predict price movements, and optimize trading strategies. our ai continuously learns from market data to improve performance and profitability.</p>
                    <div class="ecosystem-badge">ai-powered</div>
                </div>
                
                <div class="ecosystem-card">
                    <div class="ecosystem-icon">
                        <span>📊</span>
                    </div>
                    <h3 class="ecosystem-title">market intelligence</h3>
                    <p class="ecosystem-description">comprehensive market analysis tools providing deep insights into pump.fun ecosystem trends, volume patterns, and profitable opportunities. real-time data feeds power intelligent trading decisions.</p>
                    <div class="ecosystem-badge">data-driven</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2025 volumepump.fun - developer@volumepump.fun</p>
            </div>
        </footer>
    </div>

    <script>
        let volumeData = {};
        let volumeChart, tradingChart;

        async function init() {
            document.getElementById('initTime').textContent = new Date().toLocaleTimeString();
            await fetchData();
            updateStats();
            createCharts();
            startAutoRefresh();
        }

        async function fetchData() {
            try {
                const response = await fetch('/api/telegram-data');
                let isLive = false;
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.volumeData && data.volumeData.current) {
                        volumeData = data.volumeData;
                        isLive = data.dataSource === "forwarded_telegram_message";
                    }
                    
                    const statusDot = document.getElementById('statusDot');
                    const statusText = document.getElementById('statusText');
                    
                    if (isLive) {
                        statusDot.style.backgroundColor = '#00ff88';
                        statusText.textContent = 'live data feed active';
                    } else {
                        statusDot.style.backgroundColor = '#ff6b6b';
                        statusText.textContent = 'demo mode - forward data to bot';
                    }
                    
                    document.getElementById('lastUpdate').textContent = 
                        `last update: ${new Date().toLocaleString().toLowerCase()} ${isLive ? '(live)' : '(demo)'}`;
                }
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('statusText').textContent = 'connection error';
            }
        }

        function updateStats() {
            const statsGrid = document.getElementById('statsGrid');
            if (!volumeData.current) return;

            const current = volumeData.current;
            const changes = current.changes || {};

            const stats = [
                {
                    title: 'total volume',
                    value: `${current.totalVolume?.toLocaleString() || '0'} SOL`,
                    change: changes.volumeChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7f190c8d2547b132889_33.png',
                    changeClass: (changes.volumeChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'buy volume',
                    value: `${current.buyVolume?.toLocaleString() || '0'} SOL`,
                    change: changes.buyChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7f19cfd8fb0a87cfc49_d.png',
                    changeClass: (changes.buyChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'sell volume',
                    value: `${current.sellVolume?.toLocaleString() || '0'} SOL`,
                    change: changes.sellChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7f1ee461aa2920eedd0_s.png',
                    changeClass: (changes.sellChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'total trades',
                    value: current.totalTrades?.toLocaleString() || '0',
                    change: changes.tradesChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7f10bcfe07db2c399fe_44.png',
                    changeClass: (changes.tradesChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'new coins',
                    value: current.newCoins?.toLocaleString() || '0',
                    change: changes.coinsChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7f26bc543b6e36f49a8_444%20(1).png',
                    changeClass: (changes.coinsChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'total buys',
                    value: current.totalBuys?.toLocaleString() || '0',
                    change: changes.buysChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7ab5147732db9864c44_shopping-cart-3d-shopping-cart-icon-3d-shopping-cart-symbol-free-png.webp',
                    changeClass: (changes.buysChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'total sells',
                    value: current.totalSells?.toLocaleString() || '0',
                    change: changes.sellsChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7f1b059003bdf6f47a5_4444.png',
                    changeClass: (changes.sellsChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'reached koth',
                    value: current.reachedKOTH?.toLocaleString() || '0',
                    change: changes.kothChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7ab68f5e55e0f760750_c3867bc48e58c351c994b7f558f9ddd4.png',
                    changeClass: (changes.kothChange?.startsWith('+')) ? 'positive' : 'negative'
                },
                {
                    title: 'fully bonded',
                    value: current.fullyBonded?.toLocaleString() || '0',
                    change: changes.bondedChange || '+0.00%',
                    icon: 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6837a7f2417023e6cb6c8923_444%20(2).png',
                    changeClass: (changes.bondedChange?.startsWith('+')) ? 'positive' : 'negative'
                }
            ];

            statsGrid.innerHTML = stats.map(stat => `
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon"><img src="${stat.icon}" alt="${stat.title}" /></div>
                        <div class="stat-title">${stat.title}</div>
                    </div>
                    <div class="stat-value">${stat.value}</div>
                    <div class="stat-change ${stat.changeClass}">
                        ${stat.changeClass === 'positive' ? '↗' : '↘'} ${stat.change}
                    </div>
                </div>
            `).join('');
        }

        function createCharts() {
            const hourlyData = [];
            const now = new Date();
            for (let i = 23; i >= 0; i--) {
                const hour = new Date(now.getTime() - (i * 60 * 60 * 1000));
                hourlyData.push({
                    time: hour.getHours().toString().padStart(2, '0') + ':00',
                    volume: Math.random() * 3000 + 12000,
                    trades: Math.floor(Math.random() * 800 + 30000)
                });
            }

            const ctx1 = document.getElementById('volumeChart').getContext('2d');
            volumeChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: hourlyData.map(d => d.time),
                    datasets: [{
                        label: 'volume (sol)',
                        data: hourlyData.map(d => d.volume),
                        borderColor: '#00ff88',
                        backgroundColor: 'rgba(0, 255, 136, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#00ff88',
                        pointBorderColor: '#00ff88'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { 
                        legend: { labels: { color: '#ffffff' } }
                    },
                    scales: {
                        x: { 
                            ticks: { color: '#a0a0a0' }, 
                            grid: { color: '#2d2d3a' }
                        },
                        y: { 
                            ticks: { color: '#a0a0a0' }, 
                            grid: { color: '#2d2d3a' }
                        }
                    }
                }
            });

            const ctx2 = document.getElementById('tradingChart').getContext('2d');
            tradingChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: hourlyData.slice(-6).map(d => d.time),
                    datasets: [{
                        label: 'total trades',
                        data: hourlyData.slice(-6).map(d => d.trades),
                        backgroundColor: '#00ff88',
                        borderColor: '#00ff88',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { 
                        legend: { labels: { color: '#ffffff' } }
                    },
                    scales: {
                        x: { 
                            ticks: { color: '#a0a0a0' }, 
                            grid: { color: '#2d2d3a' }
                        },
                        y: { 
                            ticks: { color: '#a0a0a0' }, 
                            grid: { color: '#2d2d3a' }
                        }
                    }
                }
            });
        }

        function startAutoRefresh() {
            setInterval(async () => {
                await fetchData();
                updateStats();
            }, 60000);
        }

        function addMessage(type, content) {
            const output = document.getElementById('terminalOutput');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const avatarClass = type === 'user' ? 'user-avatar' : 
                               type === 'system' ? 'system-avatar' : 'assistant-avatar';
            const avatarText = type === 'user' ? 'YOU' : type === 'system' ? 'SYS' : 'AI';
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-avatar ${avatarClass}">${avatarText}</div>
                    <span>${type}</span>
                    <span>${new Date().toLocaleTimeString()}</span>
                </div>
                <div class="message-content">${content}</div>
            `;
            
            output.appendChild(messageDiv);
            output.scrollTop = output.scrollHeight;
        }

        async function sendCommand() {
            const input = document.getElementById('terminalInput');
            const sendButton = document.getElementById('sendButton');
            const command = input.value.trim();
            
            if (!command) return;

            addMessage('user', command);
            input.value = '';
            
            sendButton.disabled = true;
            sendButton.textContent = 'thinking...';

            const lowerCommand = command.toLowerCase();
            
            // Handle built-in commands locally
            if (lowerCommand === 'help') {
                addMessage('assistant', `available commands:
help - show commands
stats - current volume statistics  
trend - market trend analysis
ratio - buy/sell ratio analysis
status - system status
clear - clear terminal

you can also ask questions about pump.fun data`);
                sendButton.disabled = false;
                sendButton.textContent = 'send';
                return;
            } 
            
            if (lowerCommand === 'clear') {
                document.getElementById('terminalOutput').innerHTML = `
                    <div class="message system">
                        <div class="message-header">
                            <div class="message-avatar system-avatar">SYS</div>
                            <span>system</span>
                            <span>${new Date().toLocaleTimeString()}</span>
                        </div>
                        <div class="message-content">terminal cleared</div>
                    </div>
                `;
                sendButton.disabled = false;
                sendButton.textContent = 'send';
                return;
            }

            // For all other commands, use Anthropic AI
            try {
                const response = await fetch('/api/ai-analysis', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        query: command,
                        currentData: volumeData.current,
                        previousData: volumeData.previous,
                        hourlyData: []
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    addMessage('assistant', data.response);
                } else {
                    // Fallback to local analysis if API fails
                    const fallbackResponse = getFallbackResponse(command, volumeData.current);
                    addMessage('assistant', fallbackResponse);
                }
            } catch (error) {
                console.error('AI API error:', error);
                // Fallback to local analysis
                const fallbackResponse = getFallbackResponse(command, volumeData.current);
                addMessage('assistant', fallbackResponse);
            }
            
            sendButton.disabled = false;
            sendButton.textContent = 'send';
        }

        function getFallbackResponse(command, current) {
            const lowerCommand = command.toLowerCase();
            
            if (!current) {
                return 'no live data available. forward a volume report to your bot for analysis.';
            }

            if (lowerCommand === 'stats') {
                return `current volume statistics:
total volume: ${current.totalVolume?.toLocaleString() || '0'} sol
buy volume: ${current.buyVolume?.toLocaleString() || '0'} sol
sell volume: ${current.sellVolume?.toLocaleString() || '0'} sol
total trades: ${current.totalTrades?.toLocaleString() || '0'}
new coins: ${current.newCoins?.toLocaleString() || '0'}
reached koth: ${current.reachedKOTH?.toLocaleString() || '0'}
fully bonded: ${current.fullyBonded?.toLocaleString() || '0'}

buy/sell ratio: ${current.buyVolume && current.sellVolume ? (current.buyVolume/current.sellVolume).toFixed(2) : 'n/a'}:1
success rate: ${current.reachedKOTH && current.newCoins ? (current.reachedKOTH/current.newCoins*100).toFixed(1) : 'n/a'}%`;
            }
            
            if (lowerCommand === 'trend') {
                const changes = current.changes || {};
                return `market trend analysis:
volume trend: ${changes.volumeChange || 'n/a'}
trading activity: ${changes.tradesChange || 'n/a'}
new token creation: ${changes.coinsChange || 'n/a'}
koth success: ${changes.kothChange || 'n/a'}

market sentiment: ${changes.volumeChange?.startsWith('+') ? 'bullish' : 'bearish'}
activity level: ${current.totalTrades > 30000 ? 'high' : 'moderate'}`;
            }
            
            if (lowerCommand === 'ratio') {
                if (current.buyVolume && current.sellVolume) {
                    const ratio = (current.buyVolume / current.sellVolume).toFixed(2);
                    const buyPercent = (current.buyVolume / (current.buyVolume + current.sellVolume) * 100).toFixed(1);
                    return `buy/sell ratio analysis:
buy volume: ${current.buyVolume.toLocaleString()} sol (${buyPercent}%)
sell volume: ${current.sellVolume.toLocaleString()} sol (${(100 - parseFloat(buyPercent)).toFixed(1)}%)
ratio: ${ratio}:1

market sentiment: ${parseFloat(ratio) > 1 ? 'bullish (more buying)' : 'bearish (more selling)'}
pressure: ${parseFloat(buyPercent) > 60 ? 'strong buy pressure' : parseFloat(buyPercent) < 40 ? 'strong sell pressure' : 'balanced'}`;
                } else {
                    return 'no buy/sell volume data available';
                }
            }
            
            if (lowerCommand === 'status') {
                return `system status:
data source: ${current ? 'live telegram feed' : 'no data'}
last update: ${current.timestamp ? new Date(current.timestamp).toLocaleString() : 'never'}
connection: ${current ? 'active' : 'waiting for data'}

to get live data: forward volume reports from @pumpfunvolumereports to your bot`;
            }

            // Generic fallback
            return `analyzing your question about pump.fun data...

current market state:
total volume: ${current.totalVolume?.toLocaleString() || '0'} sol
total trades: ${current.totalTrades?.toLocaleString() || '0'}
market trend: ${current.changes?.volumeChange?.startsWith('+') ? 'positive' : 'moderate'}

ai analysis temporarily unavailable - using local analysis.
ask specific questions like "stats", "trend", or "ratio" for detailed data.`;
        }

        document.getElementById('terminalInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendCommand();
            }
        });

        function copyContractAddress() {
            const address = document.getElementById('contractAddress').textContent;
            navigator.clipboard.writeText(address).then(() => {
                const copyBtn = document.querySelector('.copy-btn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'copied!';
                copyBtn.style.backgroundColor = '#4ecdc4';
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.style.backgroundColor = '#00ff88';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        init();
    </script>
</body>
</html>
